<div class="table-container">
  <h1>Transactions</h1>

  <%= link_to 'New Transaction', new_transaction_path, class: 'btn btn-primary mb-3' %>

  <%= form_with url: import_excel_transactions_path, method: :post, local: true, multipart: true, class: "d-inline-block" do |form| %>
    <div class="form-group mb-3">
      <%= form.file_field :file, class: 'form-control-file' %>
    </div>
    <%= form.submit "Importar Excel", class: "btn btn-secondary" %>
  <% end %>

  <table class="table">
    <caption>Transactions Overview</caption>
    <thead>
    <tr>
      <th>Description</th>
      <th>Valor</th>
      <th>Recurring</th>
      <th>Parcela No</th>
      <th>Category</th>
      <th>Due date</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <% @transactions.each do |transaction| %>
      <tr>
        <td><%= if transaction.parent_transaction.present?
                  transaction.description
                else
                  installment_description(transaction)
                end %></td>
        <td><%= br_currency(transaction.amount) %></td>
        <td><%= transaction.recurring ? transaction.recurring.capitalize : 'nÃ£o informado' %></td>
        <td><%= transaction.installment_number %></td>
        <td><%= transaction.category.name %></td>
        <td><%= transaction.expiration.strftime("%d-%m-%Y") %></td>
        <td class="action-buttons">
          <%= link_to 'Show', transaction, class: 'btn btn-sm btn-info' %>
          <%= link_to 'Edit', edit_transaction_path(transaction), class: 'btn btn-sm btn-warning' %>
          <%= button_to 'Delete', transaction_path(transaction), method: :delete, class: 'btn btn-sm btn-danger', form: { style: 'display:inline-block;' }, data: { turbo_confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>